<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3c.org/1999/xhtml" xml:lang="zh_TW" lang="zh_TW"> <head> <title>D-LINK</title> <meta http-equiv="X-UA-Compatible" content="IE=9"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta http-equiv="Content-Type" content="text/css"> <link rel="stylesheet" type="text/css" href="css/style_h.css" media="all"/> <link href="css/jquery.selectbox.css" type="text/css" rel="stylesheet"/> <script type="text/javascript" charset="utf-8" src="./js/comm.js"></script> <script type="text/javascript" charset="utf-8" src="./js/hmac_md5.js"></script> <script type="text/javascript" charset="utf-8" src="./js/libajax.js"></script> <script type="text/javascript" charset="utf-8" src="./js/hnap.js"></script> <script type="text/javascript" charset="utf-8" src="./js/i18n.js"></script> <script type="text/javascript" charset="utf-8" src="./js/jquery-1.8.2.min.js"></script> <script type="text/javascript" charset="utf-8" src="./js/pagetool.js"></script> <script type="text/javascript" charset="utf-8" src="./js/checkTimeout.js"></script> <script type="text/javascript" charset="utf-8" src="./js/includeLang.js"></script> <script>$(document).ready(function(){presetCheckBox("enableReserveIP",true);presetCheckBox("enableAccess",true);$("div.checkbox_on"||"div.checkbox_off").click(function(c){var d=c.target.id+"_ck";if(c.target.getAttribute("class")=="checkbox_on"){var b;if(d=="enableAccess_ck"){b=I18N("j","Blocked")}else{b=I18N("j","Disabled")}c.target.setAttribute("class","checkbox_off");c.target.setAttribute("className","checkbox_off");document.getElementById(c.target.id).innerHTML='<input type="checkbox" name='+c.target.id+" id="+d+" checked>"+b;document.getElementById(d).checked=false;if(d=="enableAccess_ck"){document.getElementById("TimmyCheckBox").checked=false}if(d=="enableReserveIP_ck"){document.getElementById("TimmyCheckBox2").checked=false}}else{var a;if(d=="enableAccess_ck"){a=I18N("j","Allowed")}else{a=I18N("j","Enabled")}c.target.setAttribute("class","checkbox_on");c.target.setAttribute("className","checkbox_on");document.getElementById(c.target.id).innerHTML='<input type="checkbox" name='+c.target.id+" id="+d+' checked="">'+a;document.getElementById(d).checked=true;if(d=="enableAccess_ck"){document.getElementById("TimmyCheckBox").checked=true}if(d=="enableReserveIP_ck"){document.getElementById("TimmyCheckBox2").checked=true}}})});</script> <script type="text/javascript">var HNAP=new HNAP_XML();var Total_WirelessClients=0;var Total_MacFilterList=0;var ClientNumber=0;var CheckMACFilterList;var allText;LoadMACList();var array2Dv;var array2DvMF;var array2DvNM;function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu();initialDetectRouterConnection()}function LoadMACList(){$.get("./js/MacList.txt",function(a){allText=a;GetXML()})}function GetXML(){var k=HNAP.GetXML("GetClientInfo");var q=HNAP.GetXML("GetMACFilters2");var l=0,d=0;Total_WirelessClients=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo#");Total_MacFilterList=q.Get("GetMACFilters2Response/MACList/MACInfo#");array2Dv=new Array2DVar(Total_WirelessClients,10);array2DvMF=new Array2DVar(Total_MacFilterList,3);for(var h=1;h<=Total_WirelessClients;h++){var f=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+h+"/Type");if(f=="WiFi_2.4G_Guest"||f=="WiFi_5G_Guest"){array2Dv[l][0]=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+h+"/DeviceName");array2Dv[l][1]=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+h+"/MacAddress");array2Dv[l][2]=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+h+"/IPv4Address");array2Dv[l][3]=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+h+"/IPv6Address");array2Dv[l][9]=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+h+"/NickName");array2Dv[l][5]=k.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+h+"/ReserveIP");var m=array2Dv[l][1].split(/[\s:]+/);var e=m[m.length-6];var c=m[m.length-5];var a=m[m.length-4];var p=e+":"+c+":"+a;var n=p.toUpperCase();if(allText.match(n)==n){var o=allText.indexOf(n)+9;var b=allText.slice(o,o+17);array2Dv[l][4]=b}else{array2Dv[l][4]="Unknown Vendor"}if(array2Dv[l][3]==""){array2Dv[l][3]=""}l++}}if(Total_MacFilterList>=1){for(var h=1;h<=Total_MacFilterList;h++){array2DvMF[d][0]=q.Get("GetMACFilters2Response/MACList/MACInfo:"+h+"/DeviceName");array2DvMF[d][1]=q.Get("GetMACFilters2Response/MACList/MACInfo:"+h+"/MacAddress");array2DvMF[d][2]=h;d++}for(var h=0;h<Total_WirelessClients;h++){array2Dv[h][6]=I18N("j","Allowed");array2Dv[h][7]="#000000";array2Dv[h][8]="link_IconW_Allow"}for(var h=0;h<Total_MacFilterList;h++){for(var g=0;g<Total_WirelessClients;g++){if(array2Dv[g][1]==array2DvMF[h][1]){array2Dv[g][6]=I18N("j","Blocked");array2Dv[g][7]="#FF0000";array2Dv[g][8]="link_IconW_Block";break}}}}else{for(var g=0;g<Total_WirelessClients;g++){array2Dv[g][6]=I18N("j","Allowed");array2Dv[g][7]="#000000";array2Dv[g][8]="link_IconW_Allow"}}WirelessClient_List()}function WirelessClient_List(){var d="";var f=0;d='<table class="block" border="0" ondragstart="return false" onselectstart="return false" width="900px">';d+="<tbody>";for(var e=1;e<=Total_WirelessClients;e++){var a=array2Dv[f][0];var g=array2Dv[f][1];var c=array2Dv[f][2];var h=array2Dv[f][3];var k=array2Dv[f][4];var l=array2Dv[f][6];var b=array2Dv[f][7];var m=array2Dv[f][8];var j=array2Dv[f][9];if(typeof(g)=="undefined"||g.length==0){break}if(a==0){a="Unknown"}if(j!=0){a=j}if(e%2!=0){ClientNumber=e;d+="<tr>";d+="<td>";d+='<div class ="client_Tag">';d+='<div class ="'+m+'"></div>';d+='<div class ="client_Info">';d+='<div class ="client_Name">'+a+"</div>";d+='<div class ="client_EditImage" onclick="client_EditMember('+ClientNumber+')" style="cursor:pointer"></div>';d+='<div class ="client_Vender">'+k+"</div>";d+='<div class ="client_IPv4Address">'+c+"</div>";d+='<div class ="client_IPv6Address">'+h+"</div>";if(l=="Allowed"){d+='<div class ="client_Access">Access: <font color="'+b+'">'+l+"</font></div>"}else{d+='<div class ="client_Access">Access: <B><font color="'+b+'">'+l+"</font><B></div>"}d+="</div>";d+="</div>";d+="</td>"}else{ClientNumber=e;d+="<td>";d+='<div class ="client_Tag">';d+='<div class ="'+m+'"></div>';d+='<div class ="client_Info">';d+='<div class ="client_Name">'+a+"</div>";d+='<div class ="client_EditImage" onclick="client_EditMember('+ClientNumber+')" style="cursor:pointer"></div>';d+='<div class ="client_Vender">'+k+"</div>";d+='<div class ="client_IPv4Address">'+c+"</div>";d+='<div class ="client_IPv6Address">'+h+"</div>";if(l=="Allowed"){d+='<div class ="client_Access">Access: <font color="'+b+'">'+l+"</font></div>"}else{d+='<div class ="client_Access">Access: <B><font color="'+b+'">'+l+"</font><B></div>"}d+="</div>";d+="</div>";d+="</td>";d+="</tr>"}f++}if(Total_WirelessClients%2==1){d+="<td>";d+="</td>";d+="</tr>"}d+="</tbody>";d+="</table>";document.getElementById("wireless_Client_Group").innerHTML=d;setTimeout("ClearAndRenew()",3000)}function client_EditMember(b){document.getElementById("editPop").style.display="inline";var a=array2Dv[b-1][0];var e=array2Dv[b-1][1];var c=array2Dv[b-1][2];var f=array2Dv[b-1][3];var i=array2Dv[b-1][4];var d=array2Dv[b-1][5];var j=array2Dv[b-1][6];var g=array2Dv[b-1][9];if(g!=0){document.getElementById("client_Name").value=g}else{document.getElementById("client_Name").value=a}document.getElementById("Name_TimmyCheck").value=g;document.getElementById("client_IPAddress").value=c;document.getElementById("client_MACAddress").innerHTML=e;document.getElementById("client_Vendor").innerHTML=i;if(d!=0){presetCheckBox("enableReserveIP",true);document.getElementById("TimmyCheckBox2").checked=true}else{presetCheckBox("enableReserveIP",false);document.getElementById("TimmyCheckBox2").checked=false}var h=I18N("j","Allowed");if(j==h){presetCheckBox("enableAccess",true);document.getElementById("TimmyCheckBox").checked=true}else{presetCheckBox("enableAccess",false);document.getElementById("TimmyCheckBox").checked=false}}function closeEditPOP(){var c=HNAP.GetXML("SetClientInfo");var h=HNAP.GetXML("GetClientInfo");var b=document.getElementById("client_MACAddress").innerHTML;var l=document.getElementById("client_Name").value;var z=document.getElementById("Name_TimmyCheck").value;var o=document.getElementById("client_IPAddress").value;var t;array2DvNM=new Array2DVar(Total_WirelessClients,3);var A=1;var g=1;for(var u=0;u<Total_WirelessClients;u++){var q=h.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+A+"/Type");if(q=="WiFi_2.4G_Guest"||q=="WiFi_5G_Guest"){array2DvNM[u][0]=h.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+A+"/MacAddress");array2DvNM[u][1]=h.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+A+"/NickName");array2DvNM[u][2]=h.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+A+"/ReserveIP")}A++}for(var v=0;v<Total_WirelessClients;v++){if(b==array2DvNM[v][0]){c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/MacAddress",b);if(l!=z){c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/NickName",l)}if(document.getElementById("TimmyCheckBox2").checked==true){c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/ReserveIP",o)}else{c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/ReserveIP","")}}else{c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/MacAddress",array2DvNM[v][0]);c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/NickName",array2DvNM[v][1]);if(document.getElementById("TimmyCheckBox2").checked==true){c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/ReserveIP",array2DvNM[v][2])}else{c.Set("SetClientInfo/ClientInfoLists/ClientInfo:"+g+"/ReserveIP","")}}g++}var e=HNAP.SetXML("SetClientInfo",c);var s=HNAP.GetXML("GetMACFilters2");var B=HNAP.GetXML("SetMACFilters2");var C=s.Get("GetMACFilters2Response/MACList/MACInfo#");var d=0;for(var y=1;y<=C;y++){array2DvMF[d][0]=s.Get("GetMACFilters2Response/MACList/MACInfo:"+y+"/DeviceName");array2DvMF[d][1]=s.Get("GetMACFilters2Response/MACList/MACInfo:"+y+"/MacAddress");d++}if(C==0&&document.getElementById("TimmyCheckBox").checked==false){var a=document.getElementById("client_MACAddress").innerHTML;var f=document.getElementById("client_Name").value;B.Set("SetMACFilters2/Enabled","true");B.Set("SetMACFilters2/IsAllowList","true");B.Set("SetMACFilters2/MACList/MACInfo:1/MacAddress",a);B.Set("SetMACFilters2/MACList/MACInfo:1/DeviceName",f);var p=HNAP.SetXML("SetMACFilters2",B);window.location.reload()}else{if(C==0&&document.getElementById("TimmyCheckBox").checked==true){window.location.reload()}else{if(C>=1&&document.getElementById("TimmyCheckBox").checked==false){var a=document.getElementById("client_MACAddress").innerHTML;var f=document.getElementById("client_Name").value;var r=1;for(var x=0;x<C;x++){if(a==array2DvMF[x][1]){CheckMACFilterList=999}else{CheckMACFilterList=1000}}B.Set("SetMACFilters2/Enabled","true");B.Set("SetMACFilters2/IsAllowList","true");if(CheckMACFilterList==1000){for(var w=1;w<=C;w++){B.Set("SetMACFilters2/MACList/MACInfo:"+r+"/MacAddress",array2DvMF[r-1][1]);B.Set("SetMACFilters2/MACList/MACInfo:"+r+"/DeviceName",array2DvMF[r-1][0]);r++}B.Set("SetMACFilters2/MACList/MACInfo:"+r+"/MacAddress",a);B.Set("SetMACFilters2/MACList/MACInfo:"+r+"/DeviceName",f);var p=HNAP.SetXML("SetMACFilters2",B);window.location.reload()}else{window.location.reload()}}else{if(C>=1&&document.getElementById("TimmyCheckBox").checked==true){var a=document.getElementById("client_MACAddress").innerHTML;var f=document.getElementById("client_Name").value;CheckMACFilterList=999;for(var x=0;x<C;x++){if(a==array2DvMF[x][1]){CheckMACFilterList=x+1}}if(C!=1&&CheckMACFilterList!=999){var r=1;B.Set("SetMACFilters2/Enabled","true");B.Set("SetMACFilters2/IsAllowList","true");for(var y=0;y<C;y++){if(a!=array2DvMF[y][1]){B.Set("SetMACFilters2/MACList/MACInfo:"+r+"/DeviceName",array2DvMF[y][0]);B.Set("SetMACFilters2/MACList/MACInfo:"+r+"/MacAddress",array2DvMF[y][1]);r++}}var p=HNAP.SetXML("SetMACFilters2",B);window.location.reload()}else{if(C==1&&CheckMACFilterList==999){window.location.reload()}else{if(C==1&&CheckMACFilterList!=999){B.Set("SetMACFilters2/Enabled","true");B.Set("SetMACFilters2/IsAllowList","false");var p=HNAP.SetXML("SetMACFilters2",B);window.location.reload()}}}}}}}}function clearCreateRulePOP(){document.getElementById("editPop").style.display="none"}function ClearAndRenew(){var a="";document.getElementById("wireless_Client_Group").innerHTML=a;GetXML()}function Array2DVar(a,c){this.length=a;this.x=a;this.y=c;for(var b=0;b<this.length;b++){this[b]=new Array(c)}};</script> <style>#editPop{display:none}</style> </head> <body> <div id="wrapper"> <div id="header"></div> <div id="menu"></div> <div id="content"> <div id="info"> <div id="FunctionName"><script>I18N("h","Wi-Fi Clients (Guest Zone)");</script></div> <div id="wallimage"><img src="image/Guest.png" alt="" width="195" height="119"/></div> <div id="directions"> <script>I18N("h","Here, you can see a list of all devices connected through Wi-Fi. Click on a device to view more information about it, or click on the pencil icon to give the device a name to make it easy to identify. You can block a device from accessing your network always or according to a schedule by using the Block dropdown box.");</script> </div> </div> <a href="Wireless.html" style="text-decoration:none;"><div class="back_btn" id="back_button"><script>I18N("h","Back");</script></div></a> </div> <div id="main"> <div id="wireless_Client_Group"><br><br><br><br><br><br></div> <div id="editPop" style="display:none"> <div id="dialogBox" style="width:500px"> <div id="closeCreatePopBtn" onclick="clearCreateRulePOP()" style="cursor:pointer"></div> <table class="myCreatePop_table" border="0" cellspacing="0"> <tbody> <tr> <td colspan="3"><div class="popTitle"><script>I18N("h","Edit");</script></div></td> </tr> <tr> <th><script>I18N("h","Name");</script>:</th> <td> <input class="styled-text" type="text" name="client_Name" size="15" id="client_Name"> </td> <td style="display:none"> <input class="styled-text" type="text" name="Name_TimmyCheck" size="15" id="Name_TimmyCheck"> </td> </tr> <tr> <th><script>I18N("h","Vendor");</script>:</th> <td><Label id="client_Vendor">Unknown Vendor</Label></td> </tr> <tr> <th><script>I18N("h","IP Address");</script>:</th> <td><input class="styled-text" type="text" name="client_IPAddress" size="15" id="client_IPAddress"></td> </tr> <tr style="display:none"> <th><script>I18N("h","MAC Address");</script>:</th> <td><Label id="client_MACAddress"></Label></td> </tr> <tr> <th><script>I18N("h","Reserve IP");</script>:</th> <td><div id="enableReserveIP" class="checkbox_on"><input type="checkbox" name="enableReserveIP" id="enableReserveIP_ck" checked></div></td> <td style="display:none"><input type="checkbox" name="TimmyCheckBox2" id="TimmyCheckBox2"></td> </tr> <tr> <th><script>I18N("h","Access");</script>:</th> <td><div id="enableAccess" class="checkbox_on"><input type="checkbox" name="enableAccess" id="enableAccess_ck" checked></div></td> <td style="display:none"><input type="checkbox" name="TimmyCheckBox" id="TimmyCheckBox"></td> </tr> <tr> <td id="save_td" colspan="4"> <center><button type="button" class="styled_button_s" onclick="closeEditPOP()"><script>I18N("h","Save");</script></button></center> </td> </tr> </tbody> </table> </div> </div> </div> <div id="DetectRouterConnection" style="display:none"></div> </div> </body> <script type="text/javascript">Load_HTML();Initial();checkTimeout();</script> </html>