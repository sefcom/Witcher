var Time_GetReciprocalTime;var DetectSecond=new Date().getTime()/1000;var ReadyStartTimeout;var timeout_Value=0;var timeout_Click=0;var timeout_Draft=0;var changeFlag=false;var checkFlag=false;var Host_Name="";var CurrentTime=0;var timeout_Standard=300;var timeout_Range=10;function checkTimeout(){sessionStorage.setItem("timeout",timeout_Value);Time_GetReciprocalTime=window.clearInterval(Time_GetReciprocalTime);Time_GetReciprocalTime=self.setInterval("GetReciprocalTime()",1000)}function GetReciprocalTime(){var c=new Date().getTime()/1000;if(CurrentTime==timeout_Standard-timeout_Range){if(checkFlag==true){var b=new HNAP_XML();var a=b.GetXML("GetTimeSettings");CurrentTime=parseInt(c)-parseInt(DetectSecond)-timeout_Click;sessionStorage.setItem("timeout",CurrentTime);DetectSecond=new Date().getTime()/1000;timeout_Draft=CurrentTime;timeout_Click=0;checkFlag=false}else{CurrentTime=parseInt(c)-parseInt(DetectSecond)+timeout_Draft;sessionStorage.setItem("timeout",CurrentTime)}}else{if(sessionStorage.getItem("timeout")>=timeout_Standard){sessionStorage.removeItem("timeout");readyLogout()}else{CurrentTime=parseInt(c)-parseInt(DetectSecond)+timeout_Draft;sessionStorage.setItem("timeout",CurrentTime)}}}function GetClickTime(){var a=new Date().getTime()/1000;timeout_Click=parseInt(a)-parseInt(DetectSecond)}function readyLogout(){var c=HNAP.GetXML("Logout");var b=HNAP.SetXML("Logout",c);var a=b.Get("LogoutResponse/LogoutResult");if(a=="OK"){redirect_URL()}else{setTimeout("redirect_URL()",1000)}}function redirect_URL(){location.assign("/")}function confirmExit(){if(sessionStorage.getItem("timeout")>0){if(changeFlag){if(!confirm(I18N("j","There is unsaved data on this page. Do you want to abandon it?"))){return false}else{return true}}}};