var currentDevice=JSON.parse(sessionStorage.getItem("currentDevice"));function COMM_RandomStr(a){var f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";var e="";for(var d=0;d<a;d+=1){var b=Math.floor(Math.random()*f.length);e+=f.substring(b,b+1)}return e}function COMM_ChangePic(b,a){if(COMM_GetObj(b)!=false){COMM_GetObj(b).src=a}}function COMM_GetObj(a){if(document.getElementById){return document.getElementById(a)}else{if(document.all){return document.all[a].style}else{if(document.layers){return document.layers[a]}else{return false}}}}function COMM_IsAllSpace(b){if(b.length==0){return false}for(var a=0;a<b.length;a++){if(b.charAt(a)!=" "){return false}}return true}function COMM_EatAllSpace(b){var a=b.indexOf(" ");while(a!=-1){b=b.replace(" ","");a=b.indexOf(" ")}return b}function COMM_SetSelectValue(c,b){for(var a=0;a<c.length;a+=1){if(c[a].value==b){c.selectedIndex=a;break}}return c.selectedIndex}function COMM_SetRadioValue(a,c){var d=document.getElementsByName(a);for(var b=0;b<d.length;b++){if(d[b].value==c){d[b].checked=true;break}}}function COMM_GetRadioValue(a){var c=document.getElementsByName(a);for(var b=0;b<c.length;b++){if(c[b].checked){return c[b].value}}}function COMM_AddSelectOptionIfNoExist(e,c,f){var b=false;for(var a=0;a<e.length;a++){if(e.options[a].value==c){b=true;break}}if(!b){var d=new Option(f,c);e.options.add(d)}}function COMM_RemoveSelectOptionIfExist(c,b){for(var a=0;a<c.length;a++){if(c.options[a].value==b){c.remove(a);break}}}function COMM_ToBOOL(a){if(a==null){return false}switch(typeof(a)){case"boolean":return a;case"string":return(a=="true"||a=="TRUE"||a=="1"||a=="on")?true:false;case"number":return(a==1)?true:false}alert("COMM_ToBOOL: unsupported type "+typeof(a));return false}function COMM_ToSTRING(a){if(a==null){return""}switch(typeof(a)){case"boolean":return a?"true":"false";case"string":return a;case"number":return a+""}alert("COMM_ToSTRING: unsupported type "+typeof(a));return null}function COMM_ToNUMBER(a){if(a==null){return 0}switch(typeof(a)){case"boolean":return a?1:0;case"string":return parseInt(a,10);case"number":return a}alert("COMM_ToNUMBER: unsupported type "+typeof(a));return -1}function COMM_EqBOOL(b,a){return(COMM_ToBOOL(b)==COMM_ToBOOL(a))?true:false}function COMM_EqSTRING(b,a){return(COMM_ToSTRING(b)==COMM_ToSTRING(a))?true:false}function COMM_EqNUMBER(b,a){return(COMM_ToNUMBER(b)==COMM_ToNUMBER(a))?true:false}function COMM_Equal(b,a){if(typeof(b)=="boolean"||typeof(a)=="boolean"){return COMM_EqBOOL(b,a)}if(typeof(b)=="number"||typeof(a)=="number"){return COMM_EqNUMBER(b,a)}return COMM_EqSTRING(b,a)}function COMM_DirtyCheckSetup(){for(var c=0;c<document.forms.length;c+=1){var f=document.forms[c];if(f.getAttribute("modified")=="ignore"){continue}for(var a=0;a<f.elements.length;a+=1){var e=f.elements[a];if(e.getAttribute("modified")=="ignore"){continue}var b=e.tagName.toLowerCase();if(b=="input"){var d=e.type.toLowerCase();if(d=="text"||d=="textarea"||d=="password"||d=="hidden"){e.setAttribute("default",e.value);if(d=="text"){e.setAttribute("autocomplete","off")}}else{if(d=="checkbox"||d=="radio"){e.setAttribute("default",e.checked)}}e.setAttribute("modified",false)}else{if(b=="select"){e.setAttribute("default",e.selectedIndex);e.setAttribute("modified",false)}}}f.setAttribute("modified",false)}}function COMM_IsDirty(b){var f=false;for(var d=0;d<document.forms.length;d+=1){var h=document.forms[d];if(h.getAttribute("modified")=="ignore"){continue}if(b===true){h.setAttribute("modified",false)}else{if(COMM_Equal(h.getAttribute("modified"),"true")){f=true}}for(var a=0;a<h.elements.length;a+=1){var g=h.elements[a];if(g.disabled){continue}if(g.getAttribute("modified")=="ignore"){continue}var c=g.tagName.toLowerCase();if(c=="input"){var e=g.type.toLowerCase();if(e=="text"||e=="textarea"||e=="password"||e=="hidden"){if(!COMM_Equal(g.getAttribute("default"),g.value)){h.setAttribute("modified",true);g.setAttribute("modified",true);f=true}}else{if(e=="checkbox"||e=="radio"){if(!COMM_Equal(g.getAttribute("default"),g.checked)){h.setAttribute("modified",true);g.setAttribute("modified",true);f=true}}}}else{if(c=="select"){if(!COMM_Equal(g.getAttribute("default"),g.selectedIndex)){h.setAttribute("modified",true);g.setAttribute("modified",true);f=true}}}}}return f}function COMM_Pow(e,d){var g=1;for(var f=0;f<d;f+=1){g=g*e}return g}function COMM_IPv4INT2ADDR(c){var a=new Array();var b;a[3]=c%256;c=(c-a[3])/256;a[2]=c%256;c=(c-a[2])/256;a[1]=c%256;c=(c-a[1])/256;a[0]=c%256;b=a[0]+"."+a[1]+"."+a[2]+"."+a[3];return b}function COMM_IPv4ADDR2INT(d){var b;var a=new Array();var c;b=d.split(".");a[0]=(parseInt(b[0],[10])%256);a[1]=(parseInt(b[1],[10])%256);a[2]=(parseInt(b[2],[10])%256);a[3]=(parseInt(b[3],[10])%256);c=a[0];c=c*256+a[1];c=c*256+a[2];c=c*256+a[3];return c}function COMM_IPv4INT2MASK(b){var a=0;if(b<32){a=COMM_Pow(2,32)-COMM_Pow(2,32-b)}else{if(b==32){return"255.255.255.255"}}return COMM_IPv4INT2ADDR(a)}function count_bits(b){for(var a=7;a>=0;a-=1){if((b&COMM_Pow(2,a))==0){break}}return 7-a}function COMM_IPv4IPADDR(d,b,c){d=COMM_IPv4NETWORK(d,b);var a=Math.pow(2,parseInt(32-b,10))-1;c=parseInt((c&a),10);return COMM_IPv4INT2ADDR(COMM_IPv4ADDR2INT(d)+c)}function COMM_IPv4NETWORK(addr,mask){var addrArray=addr.split(".");var maskArray=COMM_IPv4INT2MASK(mask).split(".");var networkArray=new Array();var str="";for(var i=0;i<4;i+=1){if(isNaN(addrArray[i])||addrArray[i].length==0||parseInt(addrArray[i],10)>255){return"0.0.0.0"}networkArray[i]=eval(addrArray[i]&maskArray[i]);str+=str?"."+networkArray[i]:networkArray[i]}return str}function COMM_IPv4HOST(addr,mask){var addrArray=addr.split(".");var maskArray=COMM_IPv4INT2MASK(mask).split(".");var networkArray=new Array();var str="";for(var i=0;i<4;i+=1){networkArray[i]=eval(addrArray[i]&~maskArray[i]);str+=str?"."+networkArray[i]:networkArray[i]}return COMM_IPv4ADDR2INT(str)}function COMM_IPv4MAXHOST(a){return COMM_IPv4HOST("255.255.255.255",a)}function COMM_IPv4MASK2INT(a){var d=a.split(".");var c=new Array();var b=0;c[0]=(parseInt(d[0],[10])%256);c[1]=(parseInt(d[1],[10])%256);c[2]=(parseInt(d[2],[10])%256);c[3]=(parseInt(d[3],[10])%256);b=count_bits(c[0]);if(c[0]==255){b+=count_bits(c[1]);if(c[1]==255){b+=count_bits(c[2]);if(c[2]==255){b+=count_bits(c[3])}}}if(a!=COMM_IPv4INT2MASK(b)){return -1}return b}function COMM_ValidV4Format(b){var c=b.split(".");if(c.length!=4){return false}for(var a=0;a<4;a++){if(!COMM_IsDigit(c[a])||c[a]>255||c[3]<1){return false}}return true}function COMM_ValidV4Addr(d){var c=COMM_IPv4HOST(d,0);if(c==""||c==0){return false}var b=COMM_IPv4NETWORK(d,8);var a=b.split(".");if(a[0]<1){return false}if(a[0]>223){return false}if(a[0]==127){return false}return true}function COMM_ValidV4HOST(d,a){var c=COMM_IPv4HOST(d,a);if(c==""){return false}var b=COMM_IPv4MAXHOST(a);if(c>0&&c<b){return true}return false}function COMM_SecToStr(a){if(a==""){a=0}var b=new Array();b.day=Math.round(a/(24*60*60)-0.5);b.hour=Math.round((a%(24*60*60))/(60*60)-0.5);b.min=Math.round(((a%(24*60*60))%(60*60))/60-0.5);b.sec=((a%(24*60*60))%(60*60))%60;return b}function COMM_GetCFG(e,c,b){var a=GetAjaxObj("getData");var d="";if(e){d="CACHE=true"}if(d!=""){d+="&"}d+="SERVICES="+escape(COMM_EatAllSpace(c));a.createRequest();a.onCallback=function(f){a.release();if(b!=null){b(f)}};a.setHeader("Content-Type","application/x-www-form-urlencoded");a.sendRequest("getcfg.php",d)}function COMM_GetURLParameter(b){var a=new RegExp("(^|\\?|&)"+b+"=([^&]*)(\\s|&|$)","i");if(a.test(location.href)){return unescape(RegExp.$2.replace(/\+/g," "))}else{return""}}function COMM_CallHedwig(c,b){var a=GetAjaxObj("setData");a.createRequest();a.onCallback=function(d){a.release();b(d)};a.setHeader("Content-Type","text/xml");a.sendRequest("hedwig.cgi",c.XDoc)}function COMM_CallPigwidgeon(c,b){var a=GetAjaxObj("pigwidgeon");var d="ACTIONS="+escape(COMM_EatAllSpace(c));a.createRequest();a.onCallback=function(e){a.release();b(e)};a.setHeader("Content-Type","application/x-www-form-urlencoded");a.sendRequest("pigwidgeon.cgi",d)}function COMM_AddEntry(a,d,c){var e=parseInt(a.Get(d+"/seqno"),10);var b=parseInt(a.Get(d+"/count"),10);a.Set(d+"/seqno",e+1);b+=1;a.Set(d+"/count",b);a.Set(d+"/entry:"+b+"/uid",c+e);return d+"/entry:"+b}function COMM_DelEntry(a,e,b){var d=parseInt(a.Get(e+"/count"),10);var c=a.GetPathByTarget(e,"entry","uid",b,0);if(c!=""){d-=1;a.Del(c);a.Set(e+"/count",d)}}function COMM_SetOpacity(b,a){if(a==1){b.style.opacity=(/Gecko/.test(navigator.userAgent)&&!/Konqueror|Safari|KHTML/.test(navigator/userAgent))?10066329:null;if(/MSIE/.test(navigator.userAgent)){var c=b.style.filter;b.style.filter=c.replace(/alpha\([^\)]*\)/gi,"")}}else{if(a<0.00001){a=0}b.style.opacity=a;if(/MSIE/.test(navigator.userAgent)){var c=b.style.filter;b.style.filter=c.replace(/alpha\([^\)]*\)/gi,"");b.style.filter+="alpha(opacity="+a*100+")"}}}function COMM_GetStyle(b){var a="class";if(/MSIE 5/.test(navigator.userAgent)||/MSIE 6/.test(navigator.userAgent)||/MSIE 7/.test(navigator.userAgent)){a="className"}return b.getAttribute(a)}function COMM_SetStyle(c,b){var a="class";if(/MSIE 5/.test(navigator.userAgent)||/MSIE 6/.test(navigator.userAgent)||/MSIE 7/.test(navigator.userAgent)){a="className"}c.setAttribute(a,b)}function COMM_Event2Key(a){var b=0;if(window.event){b=a.keyCode}else{if(a.which){b=a.which}}return b}function COMM_IsDigit(a){if(a==""||a==null){return false}if(a.toString()!=parseInt(a,10).toString()){return false}return true}function COMM_IsInteger(a){var b=parseInt(a);if(isNaN(b)){return false}return a===b.toString()}function COMM_IsMAC(c){var b=/^\s*([\d[a-f]{2}:){5}[\d[a-f]{2}\s*$/i;var a=/^\s*([\d[a-f]{2}-){5}[\d[a-f]{2}\s*$/i;if(c.match(b)||c.match(a)){return true}else{return false}}function COMM_AddBR2Str(d,a){var c="";for(var b=0;b<d.length;b++){if(b!=0&&(b%a)==0){c+="<br >"}c+=d.charAt(b)}return c}var encoding_code=new Array("20","22","23","24","25","26","27","2B","2C","2F","3A","3B","3C","3D","3E","3F","40","5B","5C","5D","5E","60","7B","7C","7D","7E");var encoding_char=new Array(" ",'"',"#","$","%","&","'","+",",","/",":",";","<","=",">","?","@","[","\\","]","^","`","{","|","}","~");function asciiToHex(a){var c="";if(a==null){return""}for(var b=0;b<a.length;b++){var e=a.charCodeAt(b);var d="";d=parseInt(e/16,10);if(d>9){d=String.fromCharCode(d+55)}if((e%16)>9){d+=String.fromCharCode((e%16)+55)}else{d+=(e%16)+""}c+=d}return c}function HTMLEncode(b){var a=$("<div/>").text(b).html();a=a.replace(/ /g,"&nbsp;");return a}function HTMLDecode(a){return $("<div/>").html(a).text()}function decode_char_text(h){var g=false;var a=0;var f="";var d="";var e,c,b;if(h==null){return""}for(e=0,c=0;e<h.length;e++,c++){if(h[e]!="%"){f+=h[e]}else{g=false;d=h[e+1]+h[e+2];for(b=0;b<encoding_code.length;b++){if(d==encoding_code[b]){f+=encoding_char[b];e+=2;g=true;break}}if(g==false){f+=h[e]}}}return f}function encode_char_text(f){var e="";if(f==null){return""}for(var b=0;b<f.length;b++){var c=f.substring(b,b+1);var d=false;for(var a=0;a<encoding_char.length;a++){if(c==encoding_char[a]){d=true}}if(d){e+="%"+asciiToHex(c)}else{e+=c}}return e}var sleep=function(a){var c=$.Deferred();var b=function(){c.resolve()};setTimeout(b,a);return c.promise()};